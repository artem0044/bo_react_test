{"ast":null,"code":"import _objectSpread from\"/Users/admin/Desktop/untitled folder/bo_react_test/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import Arrow from\"@assets/images/icons/arrow-left.svg\";import{Link,useNavigate,useParams}from\"react-router-dom\";import Input from\"@components/library/UI/Input\";import{useForm}from\"react-hook-form\";import{Button}from\"@components/library\";import PasswordRequirements from\"@components/pages/Auth/components/PasswordRequirements\";import axios from\"@helpers/axios/public.axios\";import{useDispatch}from\"react-redux\";import{createPassword}from\"@actions/auth\";import{useTranslation}from\"@helpers/translate\";import{UPDATED_PASSWORD}from\"../../../constants\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const CreatePassword=()=>{const[isTypePassword,setIsTypePassword]=useState(true);const[isTypeConfirmPassword,setIsTypeConfirmPassword]=useState(true);const[myCode,setMyCode]=useState(\"\");const[loading,setLoading]=useState(false);const navigate=useNavigate();const dispatch=useDispatch();let{code,email}=useParams();const{__}=useTranslation();const{register,formState:{errors,isValid},watch,handleSubmit,getValues}=useForm({mode:\"onChange\"});const password=watch(\"new_password\");useEffect(()=>{if(email&&code){axios.post(\"/check-code\",{email,code}).then(()=>{setMyCode(code);}).catch(()=>navigate(\"/\",{replace:true}));}else{navigate(\"/\");}},[]);const onSubmit=data=>{console.log(\"RESULT\",data,myCode);const{new_password}=data;dispatch(createPassword({myCode,new_password})).then(()=>{setLoading(false);navigate(UPDATED_PASSWORD,{replace:true});}).catch(e=>{setLoading(false);console.log(e);});};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"auth-form\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/auth/login\",className:\"auth-form__back\",children:[/*#__PURE__*/_jsx(\"img\",{src:Arrow,alt:\"back\"}),__(\"common.back_to_login\")]}),/*#__PURE__*/_jsx(\"h2\",{className:\"auth-form__title\",children:__(\"auth.create_password\")}),/*#__PURE__*/_jsx(\"p\",{className:\"auth-form__text\",children:__(\"auth.create_password_text\")}),/*#__PURE__*/_jsx(Input,{className:\"auth-form__inp-wrap\",data:{label:\"\".concat(__(\"auth.new_password\"),\":\"),type:isTypePassword?\"password\":\"text\",placeholder:\"\".concat(__(\"auth.new_password\"),\":\"),errors,settings:_objectSpread({},register(\"new_password\",{required:true,minLength:8// pattern:\n// /^(?=.*\\d)(?=.*[a-zA-Z])(?=.*[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?])/,\n})),name:\"password\"},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bo-input__icon bo-input__icon--eye \".concat(!isTypePassword?\"open\":\"\"),onClick:()=>setIsTypePassword(!isTypePassword)})}),/*#__PURE__*/_jsx(Input,{className:\"auth-form__inp-wrap\",data:{label:\"\".concat(__(\"auth.confirm_password\"),\":\"),type:isTypeConfirmPassword?\"password\":\"text\",placeholder:\"\".concat(__(\"auth.confirm_password\"),\":\"),errors,settings:_objectSpread({},register(\"confirmPassword\",{required:true,validate:value=>value===getValues().new_password})),message:\"\".concat(__(\"error.pass_required\")),name:\"confirmPassword\"},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bo-input__icon bo-input__icon--eye \".concat(!isTypeConfirmPassword?\"open\":\"\"),onClick:()=>setIsTypeConfirmPassword(!isTypeConfirmPassword)})}),/*#__PURE__*/_jsx(Button,{className:\"auth-form__btn\",disabled:!isValid,size:\"middle\",type:\"submit\",color:\"white\",isLoading:loading,children:__(\"auth.update_password\")}),/*#__PURE__*/_jsx(PasswordRequirements,{password:password})]});};export default CreatePassword;","map":{"version":3,"names":["React","useEffect","useState","Arrow","Link","useNavigate","useParams","Input","useForm","Button","PasswordRequirements","axios","useDispatch","createPassword","useTranslation","UPDATED_PASSWORD","jsx","_jsx","jsxs","_jsxs","CreatePassword","isTypePassword","setIsTypePassword","isTypeConfirmPassword","setIsTypeConfirmPassword","myCode","setMyCode","loading","setLoading","navigate","dispatch","code","email","__","register","formState","errors","isValid","watch","handleSubmit","getValues","mode","password","post","then","catch","replace","onSubmit","data","console","log","new_password","e","className","children","to","src","alt","label","concat","type","placeholder","settings","_objectSpread","required","minLength","name","onClick","validate","value","message","disabled","size","color","isLoading"],"sources":["/Users/admin/Desktop/untitled folder/bo_react_test/src/components/pages/Auth/CreatePassword.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Arrow from \"@assets/images/icons/arrow-left.svg\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Input from \"@components/library/UI/Input\";\nimport { useForm } from \"react-hook-form\";\nimport { Button } from \"@components/library\";\nimport PasswordRequirements from \"@components/pages/Auth/components/PasswordRequirements\";\nimport axios from \"@helpers/axios/public.axios\";\nimport { useDispatch } from \"react-redux\";\nimport { createPassword } from \"@actions/auth\";\nimport { useTranslation } from \"@helpers/translate\";\nimport { UPDATED_PASSWORD } from \"../../../constants\";\n\nexport const CreatePassword = () => {\n  const [isTypePassword, setIsTypePassword] = useState(true);\n  const [isTypeConfirmPassword, setIsTypeConfirmPassword] = useState(true);\n  const [myCode, setMyCode] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  let { code, email } = useParams();\n  const { __ } = useTranslation();\n\n  const {\n    register,\n    formState: { errors, isValid },\n    watch,\n    handleSubmit,\n    getValues,\n  } = useForm({\n    mode: \"onChange\",\n  });\n\n  const password = watch(\"new_password\");\n\n  useEffect(() => {\n    if (email && code) {\n      axios\n        .post(\"/check-code\", { email, code })\n        .then(() => {\n          setMyCode(code);\n        })\n        .catch(() => navigate(\"/\", { replace: true }));\n    } else {\n      navigate(\"/\");\n    }\n  }, []);\n\n  const onSubmit = (data) => {\n    console.log(\"RESULT\", data, myCode);\n    const { new_password } = data;\n\n    dispatch(createPassword({ myCode, new_password }))\n      .then(() => {\n        setLoading(false);\n        navigate(UPDATED_PASSWORD, { replace: true });\n      })\n      .catch((e) => {\n        setLoading(false);\n        console.log(e);\n      });\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className=\"auth-form\">\n      <Link to=\"/auth/login\" className=\"auth-form__back\">\n        <img src={Arrow} alt=\"back\" />\n        {__(\"common.back_to_login\")}\n      </Link>\n\n      <h2 className=\"auth-form__title\">{__(\"auth.create_password\")}</h2>\n      <p className=\"auth-form__text\">{__(\"auth.create_password_text\")}</p>\n\n      <Input\n        className=\"auth-form__inp-wrap\"\n        data={{\n          label: `${__(\"auth.new_password\")}:`,\n          type: isTypePassword ? \"password\" : \"text\",\n          placeholder: `${__(\"auth.new_password\")}:`,\n          errors,\n          settings: {\n            ...register(\"new_password\", {\n              required: true,\n              minLength: 8,\n              // pattern:\n              // /^(?=.*\\d)(?=.*[a-zA-Z])(?=.*[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?])/,\n            }),\n          },\n          name: \"password\",\n        }}\n      >\n        <button\n          type=\"button\"\n          className={`bo-input__icon bo-input__icon--eye ${\n            !isTypePassword ? \"open\" : \"\"\n          }`}\n          onClick={() => setIsTypePassword(!isTypePassword)}\n        ></button>\n      </Input>\n\n      <Input\n        className=\"auth-form__inp-wrap\"\n        data={{\n          label: `${__(\"auth.confirm_password\")}:`,\n          type: isTypeConfirmPassword ? \"password\" : \"text\",\n          placeholder: `${__(\"auth.confirm_password\")}:`,\n          errors,\n          settings: {\n            ...register(\"confirmPassword\", {\n              required: true,\n              validate: (value) => value === getValues().new_password,\n            }),\n          },\n          message: `${__(\"error.pass_required\")}`,\n          name: \"confirmPassword\",\n        }}\n      >\n        <button\n          type=\"button\"\n          className={`bo-input__icon bo-input__icon--eye ${\n            !isTypeConfirmPassword ? \"open\" : \"\"\n          }`}\n          onClick={() => setIsTypeConfirmPassword(!isTypeConfirmPassword)}\n        ></button>\n      </Input>\n\n      <Button\n        className=\"auth-form__btn\"\n        disabled={!isValid}\n        size=\"middle\"\n        type=\"submit\"\n        color=\"white\"\n        isLoading={loading}\n      >\n        {__(\"auth.update_password\")}\n      </Button>\n\n      <PasswordRequirements password={password} />\n    </form>\n  );\n};\n\nexport default CreatePassword;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}