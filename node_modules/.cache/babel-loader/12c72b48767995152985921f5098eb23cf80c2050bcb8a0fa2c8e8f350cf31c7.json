{"ast":null,"code":"import{BIDS}from\"../../constants\";import store from\"../../redux/store\";export const futuresEvent=()=>dispatch=>{const state=store.getState();const bidEventListener=e=>{console.log(\"!!!!! EVENT BY SOCKETS:\",e);const state=store.getState();const walletType=state.wallet.active_wallet.type;if(e.event===\"active\"&&e.bid.wallet_init===walletType){dispatch({type:BIDS.ADD_TO_OPENED_HISTORY,payload:e.bid});}if(e.event===\"closed\"&&e.bid.wallet_init===walletType){dispatch({type:BIDS.REMOVE_FROM_OPENED_HISTORY,payload:e.bid.id});dispatch({type:BIDS.ADD_TO_CLOSED_HISTORY,payload:{date:e.bid.closing_at.split(\" \")[0],bid:e.bid}});}};state.channel.user.listen(\"BidEvent\",bidEventListener);return()=>{state.channel.user.stopListening(\"FuturesEvent\",bidEventListener);};};","map":{"version":3,"names":["BIDS","store","futuresEvent","dispatch","state","getState","bidEventListener","e","console","log","walletType","wallet","active_wallet","type","event","bid","wallet_init","ADD_TO_OPENED_HISTORY","payload","REMOVE_FROM_OPENED_HISTORY","id","ADD_TO_CLOSED_HISTORY","date","closing_at","split","channel","user","listen","stopListening"],"sources":["/Users/admin/Desktop/untitled folder/bo_react_test/src/actions/futures/futuresEvent.js"],"sourcesContent":["import {BIDS} from \"../../constants\";\nimport store from \"../../redux/store\";\n\nexport const futuresEvent = () => (dispatch) => {\n  const state = store.getState();\n  const bidEventListener = (e) => {\n    console.log(\"!!!!! EVENT BY SOCKETS:\", e);\n    const state = store.getState();\n    const walletType = state.wallet.active_wallet.type;\n\n    if (e.event === \"active\" && e.bid.wallet_init === walletType) {\n      dispatch({type: BIDS.ADD_TO_OPENED_HISTORY, payload: e.bid});\n    }\n\n    if (e.event === \"closed\" && e.bid.wallet_init === walletType) {\n      dispatch({type: BIDS.REMOVE_FROM_OPENED_HISTORY, payload: e.bid.id});\n      dispatch({\n        type: BIDS.ADD_TO_CLOSED_HISTORY, payload: {date: e.bid.closing_at.split(\" \")[0], bid: e.bid},\n      });\n    }\n  };\n  \n  state.channel.user.listen(\"BidEvent\", bidEventListener);\n  \n  return () => {\n    state.channel.user.stopListening(\"FuturesEvent\", bidEventListener);\n  };\n};\n"],"mappings":"AAAA,OAAQA,IAAI,KAAO,iBAAiB,CACpC,MAAO,CAAAC,KAAK,KAAM,mBAAmB,CAErC,MAAO,MAAM,CAAAC,YAAY,CAAGA,CAAA,GAAOC,QAAQ,EAAK,CAC9C,KAAM,CAAAC,KAAK,CAAGH,KAAK,CAACI,QAAQ,CAAC,CAAC,CAC9B,KAAM,CAAAC,gBAAgB,CAAIC,CAAC,EAAK,CAC9BC,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEF,CAAC,CAAC,CACzC,KAAM,CAAAH,KAAK,CAAGH,KAAK,CAACI,QAAQ,CAAC,CAAC,CAC9B,KAAM,CAAAK,UAAU,CAAGN,KAAK,CAACO,MAAM,CAACC,aAAa,CAACC,IAAI,CAElD,GAAIN,CAAC,CAACO,KAAK,GAAK,QAAQ,EAAIP,CAAC,CAACQ,GAAG,CAACC,WAAW,GAAKN,UAAU,CAAE,CAC5DP,QAAQ,CAAC,CAACU,IAAI,CAAEb,IAAI,CAACiB,qBAAqB,CAAEC,OAAO,CAAEX,CAAC,CAACQ,GAAG,CAAC,CAAC,CAC9D,CAEA,GAAIR,CAAC,CAACO,KAAK,GAAK,QAAQ,EAAIP,CAAC,CAACQ,GAAG,CAACC,WAAW,GAAKN,UAAU,CAAE,CAC5DP,QAAQ,CAAC,CAACU,IAAI,CAAEb,IAAI,CAACmB,0BAA0B,CAAED,OAAO,CAAEX,CAAC,CAACQ,GAAG,CAACK,EAAE,CAAC,CAAC,CACpEjB,QAAQ,CAAC,CACPU,IAAI,CAAEb,IAAI,CAACqB,qBAAqB,CAAEH,OAAO,CAAE,CAACI,IAAI,CAAEf,CAAC,CAACQ,GAAG,CAACQ,UAAU,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAET,GAAG,CAAER,CAAC,CAACQ,GAAG,CAC9F,CAAC,CAAC,CACJ,CACF,CAAC,CAEDX,KAAK,CAACqB,OAAO,CAACC,IAAI,CAACC,MAAM,CAAC,UAAU,CAAErB,gBAAgB,CAAC,CAEvD,MAAO,IAAM,CACXF,KAAK,CAACqB,OAAO,CAACC,IAAI,CAACE,aAAa,CAAC,cAAc,CAAEtB,gBAAgB,CAAC,CACpE,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}