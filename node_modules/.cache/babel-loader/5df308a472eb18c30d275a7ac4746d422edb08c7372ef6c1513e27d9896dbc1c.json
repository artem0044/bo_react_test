{"ast":null,"code":"import _objectSpread from\"/Users/admin/Desktop/untitled folder/bo_react_test/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useMemo}from\"react\";import{Link,redirect}from\"react-router-dom\";import Input from\"@components/library/UI/Input\";import{useForm}from\"react-hook-form\";import{Button}from\"@components/library\";import{loginVerify,sendLogin}from\"@actions\";import{useDispatch}from\"react-redux\";import{useTranslation}from\"@helpers/translate\";import{Helmet}from\"react-helmet\";import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export const Login=()=>{const dispatch=useDispatch();const[loading,setLoading]=useState(false);const[myData,setMyData]=useState({});const[isTypePassword,setIsTypePassword]=useState(true);const[showVerification,setShowVerification]=useState(false);const[error,setError]=useState(\"\");const{__}=useTranslation();const{register,formState:{isValid,errors},handleSubmit}=useForm({mode:\"onChange\"});console.log(errors);const onSubmit=data=>{setLoading(true);const{email,password,verification}=data;if(!showVerification){sendLogin(email,password).then(res=>{setLoading(false);setShowVerification(true);setMyData(res);}).catch(error=>{setLoading(false);setError(error.response.data.message);});}else{dispatch(loginVerify({email,password,verification,hash:myData.hash})).then(()=>{redirect(\"/\");}).catch(error=>{console.log(error);setLoading(false);setError(error.response.data.message);});}};const formChange=()=>{setError(\"\");};const checkTypeCode=useMemo(()=>{let message=\"\";switch(myData[\"2fa_type\"]){case\"app\":message=\"\".concat(__(\"auth.enter_google_code\"),\":\");break;case\"sms\":message=\"\".concat(__(\"auth.enter_sms_code\"),\":\");break;default:message=\"\".concat(__(\"auth.enter_email_code\"),\":\");}return message;},[myData]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsxs(\"title\",{children:[__(\"seo.log_in\"),\" \",__(\"seo.divider\"),\" \",__(\"seo.title\")]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),onChange:formChange,className:\"auth-form\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"auth-form__title\",children:__(\"auth.log_in\")}),/*#__PURE__*/_jsxs(\"p\",{className:\"auth-form__text\",children:[__(\"auth.first_time\"),\"\\xA0\",/*#__PURE__*/_jsx(Link,{to:\"/auth/signup\",children:__(\"auth.sign_up\")})]}),/*#__PURE__*/_jsx(Input,{className:\"auth.js-form__inp-wrap\",data:{label:\"\".concat(__(\"common.email\"),\":\"),type:\"email\",placeholder:\"\".concat(__(\"common.enter_email\"),\":\"),errors,error,settings:_objectSpread({},register(\"email\",{required:true,pattern:/^(([a-zA-Z0-9\\-._]+)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/})),message:\"\".concat(__(\"error.email_format\")),name:\"email\"}}),/*#__PURE__*/_jsx(Input,{className:\"auth.js-form__inp-wrap\",data:{label:\"\".concat(__(\"common.password\"),\":\"),type:isTypePassword?\"password\":\"text\",placeholder:\"\".concat(__(\"common.enter_password\"),\":\"),errors,error,settings:_objectSpread({},register(\"password\",{required:true,minLength:8// pattern:\n// /^(?=.*\\d)(?=.*[a-zA-Z])(?=.*[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?])/,\n})),message:\"\".concat(__(\"error.pass_required\")),name:\"password\"},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bo-input__icon bo-input__icon--eye \".concat(!isTypePassword?\"open\":\"\"),onClick:()=>setIsTypePassword(!isTypePassword)})}),showVerification&&/*#__PURE__*/_jsx(Input,{className:\"auth.js-form__inp-wrap bo-input--icon\",data:{label:checkTypeCode,type:\"text\",placeholder:\"\".concat(__(\"common.enter_code\")),errors,error,settings:_objectSpread({},register(\"verification\",{required:true,minLength:6,maxLength:6,pattern:/^\\d{6}$/})),message:\"\".concat(__(\"error.invalid_code\")),name:\"verification\"},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bo-input__icon bo-input__icon--left bo-input__icon--key\"})}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"auth-form__error\",children:error}),/*#__PURE__*/_jsx(Link,{to:\"/auth/recover-password\",className:\"auth-form__link\",children:__(\"auth.forgot_pass\")}),/*#__PURE__*/_jsx(Button,{disabled:!isValid,className:\"auth-form__btn\",type:\"submit\",color:\"white\",size:\"middle\",isLoading:loading,children:__(\"auth.log_in\")})]})]});};export default Login;","map":{"version":3,"names":["React","useState","useMemo","Link","redirect","Input","useForm","Button","loginVerify","sendLogin","useDispatch","useTranslation","Helmet","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Login","dispatch","loading","setLoading","myData","setMyData","isTypePassword","setIsTypePassword","showVerification","setShowVerification","error","setError","__","register","formState","isValid","errors","handleSubmit","mode","console","log","onSubmit","data","email","password","verification","then","res","catch","response","message","hash","formChange","checkTypeCode","concat","children","onChange","className","to","label","type","placeholder","settings","_objectSpread","required","pattern","name","minLength","onClick","maxLength","disabled","color","size","isLoading"],"sources":["/Users/admin/Desktop/untitled folder/bo_react_test/src/components/pages/Auth/Login.jsx"],"sourcesContent":["import React, { useState, useMemo } from \"react\";\nimport { Link, redirect } from \"react-router-dom\";\nimport Input from \"@components/library/UI/Input\";\nimport { useForm } from \"react-hook-form\";\nimport { Button } from \"@components/library\";\n\nimport { loginVerify, sendLogin } from \"@actions\";\nimport { useDispatch } from \"react-redux\";\nimport { useTranslation } from \"@helpers/translate\";\nimport { Helmet } from \"react-helmet\";\n\nexport const Login = () => {\n  const dispatch = useDispatch();\n  const [loading, setLoading] = useState(false);\n  const [myData, setMyData] = useState({});\n  const [isTypePassword, setIsTypePassword] = useState(true);\n  const [showVerification, setShowVerification] = useState(false);\n  const [error, setError] = useState(\"\");\n  const { __ } = useTranslation();\n\n  const {\n    register,\n    formState: { isValid, errors },\n    handleSubmit,\n  } = useForm({ mode: \"onChange\" });\n\n  console.log(errors);\n\n  const onSubmit = (data) => {\n    setLoading(true);\n\n    const { email, password, verification } = data;\n    if (!showVerification) {\n      sendLogin(email, password)\n        .then((res) => {\n          setLoading(false);\n          setShowVerification(true);\n          setMyData(res);\n        })\n        .catch((error) => {\n          setLoading(false);\n          setError(error.response.data.message);\n        });\n    } else {\n      dispatch(\n        loginVerify({\n          email,\n          password,\n          verification,\n          hash: myData.hash,\n        })\n      )\n        .then(() => {\n          redirect(\"/\");\n        })\n        .catch((error) => {\n          console.log(error);\n          setLoading(false);\n          setError(error.response.data.message);\n        });\n    }\n  };\n\n  const formChange = () => {\n    setError(\"\");\n  };\n\n  const checkTypeCode = useMemo(() => {\n    let message = \"\";\n    switch (myData[\"2fa_type\"]) {\n      case \"app\":\n        message = `${__(\"auth.enter_google_code\")}:`;\n        break;\n      case \"sms\":\n        message = `${__(\"auth.enter_sms_code\")}:`;\n        break;\n      default:\n        message = `${__(\"auth.enter_email_code\")}:`;\n    }\n    return message;\n  }, [myData]);\n\n  return (\n    <>\n      <Helmet>\n        <title>\n          {__(\"seo.log_in\")} {__(\"seo.divider\")} {__(\"seo.title\")}\n        </title>\n      </Helmet>\n      <form\n        onSubmit={handleSubmit(onSubmit)}\n        onChange={formChange}\n        className=\"auth-form\"\n      >\n        <h2 className=\"auth-form__title\">{__(\"auth.log_in\")}</h2>\n        <p className=\"auth-form__text\">\n          {__(\"auth.first_time\")}&nbsp;\n          <Link to=\"/auth/signup\">{__(\"auth.sign_up\")}</Link>\n        </p>\n        <Input\n          className={\"auth.js-form__inp-wrap\"}\n          data={{\n            label: `${__(\"common.email\")}:`,\n            type: \"email\",\n            placeholder: `${__(\"common.enter_email\")}:`,\n            errors,\n            error,\n            settings: {\n              ...register(\"email\", {\n                required: true,\n                pattern:\n                  /^(([a-zA-Z0-9\\-._]+)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n              }),\n            },\n            message: `${__(\"error.email_format\")}`,\n            name: \"email\",\n          }}\n        />\n        <Input\n          className={\"auth.js-form__inp-wrap\"}\n          data={{\n            label: `${__(\"common.password\")}:`,\n            type: isTypePassword ? \"password\" : \"text\",\n            placeholder: `${__(\"common.enter_password\")}:`,\n            errors,\n            error,\n            settings: {\n              ...register(\"password\", {\n                required: true,\n                minLength: 8,\n                // pattern:\n                // /^(?=.*\\d)(?=.*[a-zA-Z])(?=.*[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?])/,\n              }),\n            },\n            message: `${__(\"error.pass_required\")}`,\n            name: \"password\",\n          }}\n        >\n          <button\n            type=\"button\"\n            className={`bo-input__icon bo-input__icon--eye ${\n              !isTypePassword ? \"open\" : \"\"\n            }`}\n            onClick={() => setIsTypePassword(!isTypePassword)}\n          ></button>\n        </Input>\n        {showVerification && (\n          <Input\n            className={\"auth.js-form__inp-wrap bo-input--icon\"}\n            data={{\n              label: checkTypeCode,\n              type: \"text\",\n              placeholder: `${__(\"common.enter_code\")}`,\n              errors,\n              error,\n              settings: {\n                ...register(\"verification\", {\n                  required: true,\n                  minLength: 6,\n                  maxLength: 6,\n                  pattern: /^\\d{6}$/,\n                }),\n              },\n              message: `${__(\"error.invalid_code\")}`,\n              name: \"verification\",\n            }}\n          >\n            <button\n              type=\"button\"\n              className=\"bo-input__icon bo-input__icon--left bo-input__icon--key\"\n            ></button>\n          </Input>\n        )}\n\n        {error && <p className=\"auth-form__error\">{error}</p>}\n\n        <Link to=\"/auth/recover-password\" className=\"auth-form__link\">\n          {__(\"auth.forgot_pass\")}\n        </Link>\n        <Button\n          disabled={!isValid}\n          className=\"auth-form__btn\"\n          type=\"submit\"\n          color=\"white\"\n          size=\"middle\"\n          isLoading={loading}\n        >\n          {__(\"auth.log_in\")}\n        </Button>\n      </form>\n    </>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}