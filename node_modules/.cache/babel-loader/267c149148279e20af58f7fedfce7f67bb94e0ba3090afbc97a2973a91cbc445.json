{"ast":null,"code":"import _objectSpread from\"/Users/admin/Desktop/untitled folder/bo_react_test/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import Apple from\"@assets/images/apple.svg\";import Google from\"@assets/images/google.svg\";import Qr from\"@assets/images/QR.png\";import Copy from\"@assets/images/icons/copy.svg\";import Info from\"@assets/images/icons/info-circle.svg\";import axios from\"@helpers/axios/private.axios\";import\"./index.sass\";import Input from\"@components/library/UI/Input\";import{Button}from\"@components/library\";import{CopyToClipboard}from\"react-copy-to-clipboard/src\";import{useForm}from\"react-hook-form\";import{useDispatch}from\"react-redux\";import{post2FA}from\"@actions/user\";import{useTranslation}from\"@helpers/translate\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Authentication=_ref=>{let{setShowWarning}=_ref;const[data2FA,setData2FA]=useState({});const dispatch=useDispatch();const{register,formState:{errors,isValid},handleSubmit,reset}=useForm();const{__}=useTranslation();useEffect(()=>{const get2Fa=async()=>{try{const resp=await axios.get(\"/users/2fa/init\");const{qr,secret}=resp.data.data;setData2FA({qr,secret});}catch(e){console.log(e);}};get2Fa();},[]);const onSubmit=async data=>{try{await dispatch(post2FA({data,secret}));setShowWarning(true);}catch(error){console.log(error,\"error\");}finally{reset();}};const{qr,secret}=data2FA;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"g-authentication__sec step-section authentication__step\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"step-section__header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-section__step\",children:\"1\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"step-section__title\",children:__(\"settings.download_app\")})]}),/*#__PURE__*/_jsx(\"p\",{className:\"step-section__text\",children:__(\"settings.download_app_text\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-section__links\",children:[/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",href:\"https://apps.apple.com/ru/app/google-authenticator/id388497605\",className:\"step-section__link\",children:/*#__PURE__*/_jsx(\"img\",{src:Apple,alt:\"app store\"})}),/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",href:\"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&pcampaignid=web_share\",className:\"step-section__link\",children:/*#__PURE__*/_jsx(\"img\",{src:Google,alt:\"google play\"})})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"g-authentication__sec step-section\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"step-section__header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-section__step\",children:\"2\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"step-section__title\",children:__(\"settings.save_2fa\")})]}),/*#__PURE__*/_jsx(\"p\",{className:\"step-section__text\",children:__(\"settings.save_2fa_text\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-section__qr\",children:[/*#__PURE__*/_jsx(\"picture\",{className:\"step-section__qr-pic \".concat(qr?\"\":\"blur\"),children:qr?/*#__PURE__*/_jsx(\"img\",{src:qr}):/*#__PURE__*/_jsx(\"img\",{src:Qr})}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-section__qr-wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"step-section__qr-copy\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"step-section__qr-text\",children:secret}),/*#__PURE__*/_jsx(CopyToClipboard,{text:secret,children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"step-section__qr-btn\",children:/*#__PURE__*/_jsx(\"img\",{src:Copy})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-section__qr-warning\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"step-section__qr-w-icon\",src:Info,alt:\"warning\"}),/*#__PURE__*/_jsx(\"p\",{className:\"step-section__qr-w-text\",children:__(\"tooltip.store_safely\")})]})]})]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"g-authentication__sec\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"g-authentication__sec step-section\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"step-section__header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-section__step\",children:\"3\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"step-section__title\",children:__(\"settings.confirm_2fa\")})]}),/*#__PURE__*/_jsx(Input,{className:\"step-section__inp-wrap\",data:{label:\"\".concat(__(\"settings.enter_2fa_label\")),type:\"text\",placeholder:\"\".concat(__(\"settings.enter_2fa\")),errors,settings:_objectSpread({},register(\"code\",{required:true,minLength:6,maxLength:6})),message:\"\".concat(__(\"error.invalid_code_format\")),name:\"code\"}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"g-authentication__btn\",color:\"orange\",size:\"middle\",disabled:!isValid,children:__(\"settings.enable_2fa\")})]})]});};export default Authentication;","map":{"version":3,"names":["React","useEffect","useState","Apple","Google","Qr","Copy","Info","axios","Input","Button","CopyToClipboard","useForm","useDispatch","post2FA","useTranslation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Authentication","_ref","setShowWarning","data2FA","setData2FA","dispatch","register","formState","errors","isValid","handleSubmit","reset","__","get2Fa","resp","get","qr","secret","data","e","console","log","onSubmit","error","children","className","target","href","src","alt","concat","text","type","label","placeholder","settings","_objectSpread","required","minLength","maxLength","message","name","color","size","disabled"],"sources":["/Users/admin/Desktop/untitled folder/bo_react_test/src/components/pages/Settings/components/Authentication/GoogleAuthentication.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Apple from \"@assets/images/apple.svg\";\nimport Google from \"@assets/images/google.svg\";\nimport Qr from \"@assets/images/QR.png\";\nimport Copy from \"@assets/images/icons/copy.svg\";\nimport Info from \"@assets/images/icons/info-circle.svg\";\nimport axios from \"@helpers/axios/private.axios\";\n\nimport \"./index.sass\";\nimport Input from \"@components/library/UI/Input\";\nimport { Button } from \"@components/library\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard/src\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch } from \"react-redux\";\nimport { post2FA } from \"@actions/user\";\nimport { useTranslation } from \"@helpers/translate\";\n\nconst Authentication = ({ setShowWarning }) => {\n  const [data2FA, setData2FA] = useState({});\n  const dispatch = useDispatch();\n  const {\n    register,\n    formState: { errors, isValid },\n    handleSubmit,\n    reset,\n  } = useForm();\n  const { __ } = useTranslation();\n\n  useEffect(() => {\n    const get2Fa = async () => {\n      try {\n        const resp = await axios.get(\"/users/2fa/init\");\n\n        const { qr, secret } = resp.data.data;\n\n        setData2FA({ qr, secret });\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    get2Fa();\n  }, []);\n\n  const onSubmit = async (data) => {\n    try {\n      await dispatch(post2FA({ data, secret }));\n      setShowWarning(true);\n    } catch (error) {\n      console.log(error, \"error\");\n    } finally {\n      reset();\n    }\n  };\n\n  const { qr, secret } = data2FA;\n\n  return (\n    <>\n      <section className=\"g-authentication__sec step-section authentication__step\">\n        <header className=\"step-section__header\">\n          <div className=\"step-section__step\">1</div>\n          <h3 className=\"step-section__title\">{__(\"settings.download_app\")}</h3>\n        </header>\n        <p className=\"step-section__text\">{__(\"settings.download_app_text\")}</p>\n\n        <div className=\"step-section__links\">\n          <a\n            target=\"_blank\"\n            href=\"https://apps.apple.com/ru/app/google-authenticator/id388497605\"\n            className=\"step-section__link\"\n          >\n            <img src={Apple} alt=\"app store\" />\n          </a>\n          <a\n            target=\"_blank\"\n            href=\"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&pcampaignid=web_share\"\n            className=\"step-section__link\"\n          >\n            <img src={Google} alt=\"google play\" />\n          </a>\n        </div>\n      </section>\n\n      <section className=\"g-authentication__sec step-section\">\n        <header className=\"step-section__header\">\n          <div className=\"step-section__step\">2</div>\n          <h3 className=\"step-section__title\">{__(\"settings.save_2fa\")}</h3>\n        </header>\n        <p className=\"step-section__text\">{__(\"settings.save_2fa_text\")}</p>\n\n        <div className=\"step-section__qr\">\n          <picture className={`step-section__qr-pic ${qr ? \"\" : \"blur\"}`}>\n            {qr ? <img src={qr} /> : <img src={Qr} />}\n          </picture>\n\n          <div className=\"step-section__qr-wrap\">\n            <div className=\"step-section__qr-copy\">\n              <p className=\"step-section__qr-text\">{secret}</p>\n              <CopyToClipboard text={secret}>\n                <button type=\"button\" className=\"step-section__qr-btn\">\n                  <img src={Copy} />\n                </button>\n              </CopyToClipboard>\n            </div>\n            <div className=\"step-section__qr-warning\">\n              <img\n                className=\"step-section__qr-w-icon\"\n                src={Info}\n                alt=\"warning\"\n              />\n              <p className=\"step-section__qr-w-text\">\n                {__(\"tooltip.store_safely\")}\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <form onSubmit={handleSubmit(onSubmit)} className=\"g-authentication__sec\">\n        <section className=\"g-authentication__sec step-section\">\n          <header className=\"step-section__header\">\n            <div className=\"step-section__step\">3</div>\n            <h3 className=\"step-section__title\">\n              {__(\"settings.confirm_2fa\")}\n            </h3>\n          </header>\n\n          <Input\n            className={\"step-section__inp-wrap\"}\n            data={{\n              label: `${__(\"settings.enter_2fa_label\")}`,\n              type: \"text\",\n              placeholder: `${__(\"settings.enter_2fa\")}`,\n              errors,\n              settings: {\n                ...register(\"code\", {\n                  required: true,\n                  minLength: 6,\n                  maxLength: 6,\n                }),\n              },\n              message: `${__(\"error.invalid_code_format\")}`,\n              name: \"code\",\n            }}\n          />\n        </section>\n\n        <Button\n          type=\"submit\"\n          className=\"g-authentication__btn\"\n          color=\"orange\"\n          size=\"middle\"\n          disabled={!isValid}\n        >\n          {__(\"settings.enable_2fa\")}\n        </Button>\n      </form>\n    </>\n  );\n};\n\nexport default Authentication;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}