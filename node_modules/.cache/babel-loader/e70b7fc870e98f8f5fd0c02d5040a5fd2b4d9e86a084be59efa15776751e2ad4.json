{"ast":null,"code":"import{BIDS}from\"../../constants\";import store from\"../../redux/store\";import coinsSound from\"@assets/coin.mp3\";import{playSound}from\"@helpers\";export const bidEvent=()=>dispatch=>{const state=store.getState();const bidEventListener=e=>{console.log(\"!!!!! EVENT BY SOCKETS:\",e);const state=store.getState();const walletType=state.wallet.active_wallet.type;if(e.event===\"active\"&&e.bid.wallet_init===walletType){dispatch({type:BIDS.ADD_TO_OPENED_HISTORY,payload:e.bid});}if(e.event===\"closed\"&&e.bid.wallet_init===walletType){dispatch({type:BIDS.REMOVE_FROM_OPENED_HISTORY,payload:e.bid.id});dispatch({type:BIDS.ADD_TO_CLOSED_HISTORY,payload:{date:e.bid.closing_at.split(\" \")[0],bid:e.bid}});playSound(coinsSound);}};const notificationEventListener=e=>{console.log(\"!!!!! EVENT BY SOCKETS Notification:\",e);dispatch({type:BIDS.SHOW_NOTIFICATION,payload:{text:e.message}});};state.channel.user.listen(\"BidEvent\",bidEventListener);state.channel.user.listen(\"NotificationEvent\",notificationEventListener);// Повертаємо функцію, яка відписується від лісенерів\nreturn()=>{state.channel.user.stopListening(\"BidEvent\",bidEventListener);state.channel.user.stopListening(\"NotificationEvent\",notificationEventListener);};};","map":{"version":3,"names":["BIDS","store","coinsSound","playSound","bidEvent","dispatch","state","getState","bidEventListener","e","console","log","walletType","wallet","active_wallet","type","event","bid","wallet_init","ADD_TO_OPENED_HISTORY","payload","REMOVE_FROM_OPENED_HISTORY","id","ADD_TO_CLOSED_HISTORY","date","closing_at","split","notificationEventListener","SHOW_NOTIFICATION","text","message","channel","user","listen","stopListening"],"sources":["/Users/admin/Desktop/untitled folder/bo_react_test/src/actions/bids/bidEvent.js"],"sourcesContent":["import {BIDS} from \"../../constants\";\nimport store from \"../../redux/store\";\nimport coinsSound from \"@assets/coin.mp3\";\nimport {playSound} from \"@helpers\";\n\nexport const bidEvent = () => (dispatch) => {\n  const state = store.getState();\n  const bidEventListener = (e) => {\n    console.log(\"!!!!! EVENT BY SOCKETS:\", e);\n    const state = store.getState();\n    const walletType = state.wallet.active_wallet.type;\n\n    if (e.event === \"active\" && e.bid.wallet_init === walletType) {\n      dispatch({type: BIDS.ADD_TO_OPENED_HISTORY, payload: e.bid});\n    }\n\n    if (e.event === \"closed\" && e.bid.wallet_init === walletType) {\n      dispatch({type: BIDS.REMOVE_FROM_OPENED_HISTORY, payload: e.bid.id});\n      dispatch({\n        type: BIDS.ADD_TO_CLOSED_HISTORY, payload: {date: e.bid.closing_at.split(\" \")[0], bid: e.bid},\n      });\n\n      playSound(coinsSound);\n    }\n  };\n\n  const notificationEventListener = (e) => {\n    console.log(\"!!!!! EVENT BY SOCKETS Notification:\", e);\n    dispatch({type: BIDS.SHOW_NOTIFICATION, payload: {text: e.message}});\n  };\n\n  state.channel.user.listen(\"BidEvent\", bidEventListener);\n  state.channel.user.listen(\"NotificationEvent\", notificationEventListener);\n\n  // Повертаємо функцію, яка відписується від лісенерів\n  return () => {\n    state.channel.user.stopListening(\"BidEvent\", bidEventListener);\n    state.channel.user.stopListening(\"NotificationEvent\", notificationEventListener);\n  };\n};\n"],"mappings":"AAAA,OAAQA,IAAI,KAAO,iBAAiB,CACpC,MAAO,CAAAC,KAAK,KAAM,mBAAmB,CACrC,MAAO,CAAAC,UAAU,KAAM,kBAAkB,CACzC,OAAQC,SAAS,KAAO,UAAU,CAElC,MAAO,MAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAOC,QAAQ,EAAK,CAC1C,KAAM,CAAAC,KAAK,CAAGL,KAAK,CAACM,QAAQ,CAAC,CAAC,CAC9B,KAAM,CAAAC,gBAAgB,CAAIC,CAAC,EAAK,CAC9BC,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEF,CAAC,CAAC,CACzC,KAAM,CAAAH,KAAK,CAAGL,KAAK,CAACM,QAAQ,CAAC,CAAC,CAC9B,KAAM,CAAAK,UAAU,CAAGN,KAAK,CAACO,MAAM,CAACC,aAAa,CAACC,IAAI,CAElD,GAAIN,CAAC,CAACO,KAAK,GAAK,QAAQ,EAAIP,CAAC,CAACQ,GAAG,CAACC,WAAW,GAAKN,UAAU,CAAE,CAC5DP,QAAQ,CAAC,CAACU,IAAI,CAAEf,IAAI,CAACmB,qBAAqB,CAAEC,OAAO,CAAEX,CAAC,CAACQ,GAAG,CAAC,CAAC,CAC9D,CAEA,GAAIR,CAAC,CAACO,KAAK,GAAK,QAAQ,EAAIP,CAAC,CAACQ,GAAG,CAACC,WAAW,GAAKN,UAAU,CAAE,CAC5DP,QAAQ,CAAC,CAACU,IAAI,CAAEf,IAAI,CAACqB,0BAA0B,CAAED,OAAO,CAAEX,CAAC,CAACQ,GAAG,CAACK,EAAE,CAAC,CAAC,CACpEjB,QAAQ,CAAC,CACPU,IAAI,CAAEf,IAAI,CAACuB,qBAAqB,CAAEH,OAAO,CAAE,CAACI,IAAI,CAAEf,CAAC,CAACQ,GAAG,CAACQ,UAAU,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAET,GAAG,CAAER,CAAC,CAACQ,GAAG,CAC9F,CAAC,CAAC,CAEFd,SAAS,CAACD,UAAU,CAAC,CACvB,CACF,CAAC,CAED,KAAM,CAAAyB,yBAAyB,CAAIlB,CAAC,EAAK,CACvCC,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAEF,CAAC,CAAC,CACtDJ,QAAQ,CAAC,CAACU,IAAI,CAAEf,IAAI,CAAC4B,iBAAiB,CAAER,OAAO,CAAE,CAACS,IAAI,CAAEpB,CAAC,CAACqB,OAAO,CAAC,CAAC,CAAC,CACtE,CAAC,CAEDxB,KAAK,CAACyB,OAAO,CAACC,IAAI,CAACC,MAAM,CAAC,UAAU,CAAEzB,gBAAgB,CAAC,CACvDF,KAAK,CAACyB,OAAO,CAACC,IAAI,CAACC,MAAM,CAAC,mBAAmB,CAAEN,yBAAyB,CAAC,CAEzE;AACA,MAAO,IAAM,CACXrB,KAAK,CAACyB,OAAO,CAACC,IAAI,CAACE,aAAa,CAAC,UAAU,CAAE1B,gBAAgB,CAAC,CAC9DF,KAAK,CAACyB,OAAO,CAACC,IAAI,CAACE,aAAa,CAAC,mBAAmB,CAAEP,yBAAyB,CAAC,CAClF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}