{"ast":null,"code":"import _objectSpread from\"/Users/admin/Desktop/untitled folder/bo_react_test/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{Button}from\"@components/library\";import{Grid}from\"@mui/material\";import{Controller,useForm}from\"react-hook-form\";import{useDispatch}from\"react-redux\";import PhoneInput from\"react-phone-input-2\";import axios from\"@helpers/axios/private.axios\";import Input from\"../../../../library/UI/Input\";import{changeUserNumber}from\"@actions/user/changeUserNumber\";import{useTranslation}from\"@helpers/translate\";import{Helmet}from\"react-helmet\";import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const ChangePhone=()=>{const dispatch=useDispatch();const[loading,setLoading]=useState(false);const[showVerification,setShowVerification]=useState(false);const[error,setError]=useState(\"\");const{__}=useTranslation();const{handleSubmit,control,register,reset,formState:{errors,isValid}}=useForm();const onSubmit=_ref=>{let{phone,code}=_ref;setLoading(true);if(!showVerification){axios.post(\"/users/change/phone\",{phone:\"+\"+phone}).then(()=>{setShowVerification(true);}).catch(error=>{setError(error.response.data.message);}).finally(()=>{setLoading(false);});}else{dispatch(changeUserNumber({code})).then(()=>{reset();}).catch(error=>{setError(error.response.data.message);}).finally(()=>{setLoading(false);});}};const formChange=()=>{setError(\"\");};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsxs(\"title\",{children:[__(\"seo.change_phone_number\"),\" \",__(\"seo.divider\"),\" \",__(\"seo.title\")]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"changePhone settings\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"settings__header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"settings__title\",children:__(\"settings.change_number\")}),/*#__PURE__*/_jsx(\"p\",{className:\"settings__text\",children:__(\"settings.change_number_text\")})]}),/*#__PURE__*/_jsxs(\"form\",{onChange:formChange,onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(Grid,{container:true,columnSpacing:\"1rem\",rowSpacing:\"1.25rem\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xl:6,md:8,xs:12,children:/*#__PURE__*/_jsx(\"div\",{className:\"bo-input\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"bo-input__label\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"bo-input__label-text\",children:[__(\"settings.enter_phone\"),\":\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"bo-input__wrap\",children:/*#__PURE__*/_jsx(Controller,{name:\"phone\",control:control,rules:{required:true},render:_ref2=>{let{field}=_ref2;return/*#__PURE__*/_jsx(PhoneInput,{value:field.value,specialLabel:false,disableDropdown:true,placeholder:\"+45 (___)___-____\",onChange:e=>field.onChange(e),className:\"\".concat(error?\"error\":\"\",\" bo-input__input\")});}})})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xl:6,md:8,xs:12}),/*#__PURE__*/_jsx(Grid,{item:true,xl:6,md:8,xs:12,children:showVerification&&/*#__PURE__*/_jsx(Input,{className:\"auth.js-form__inp-wrap bo-input--icon\",data:{label:\"\".concat(__(\"settings.v_code\"),\":\"),type:\"text\",placeholder:\"\".concat(__(\"settings.v_code_enter\")),errors,error,settings:_objectSpread({},register(\"code\",{required:true,minLength:6,maxLength:6,pattern:/^\\d{6}$/})),message:\"\".concat(__(\"error.invalid_code\")),name:\"code\"},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bo-input__icon bo-input__icon--left bo-input__icon--key\"})})})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"auth-form__error\",children:error}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"settings__btn\",color:\"orange\",size:\"middle\",isLoading:loading,disabled:!isValid,children:__(\"settings.confirm\")})]})]})]});};export default/*#__PURE__*/React.memo(ChangePhone);","map":{"version":3,"names":["React","useState","Button","Grid","Controller","useForm","useDispatch","PhoneInput","axios","Input","changeUserNumber","useTranslation","Helmet","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","ChangePhone","dispatch","loading","setLoading","showVerification","setShowVerification","error","setError","__","handleSubmit","control","register","reset","formState","errors","isValid","onSubmit","_ref","phone","code","post","then","catch","response","data","message","finally","formChange","children","className","onChange","container","columnSpacing","rowSpacing","item","xl","md","xs","name","rules","required","render","_ref2","field","value","specialLabel","disableDropdown","placeholder","e","concat","label","type","settings","_objectSpread","minLength","maxLength","pattern","color","size","isLoading","disabled","memo"],"sources":["/Users/admin/Desktop/untitled folder/bo_react_test/src/components/pages/Settings/components/ChangePhone/index.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Button } from \"@components/library\";\nimport { Grid } from \"@mui/material\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport { useDispatch } from \"react-redux\";\nimport PhoneInput from \"react-phone-input-2\";\nimport axios from \"@helpers/axios/private.axios\";\nimport Input from \"../../../../library/UI/Input\";\nimport { changeUserNumber } from \"@actions/user/changeUserNumber\";\nimport { useTranslation } from \"@helpers/translate\";\nimport { Helmet } from \"react-helmet\";\n\nconst ChangePhone = () => {\n  const dispatch = useDispatch();\n  const [loading, setLoading] = useState(false);\n  const [showVerification, setShowVerification] = useState(false);\n  const [error, setError] = useState(\"\");\n  const { __ } = useTranslation();\n\n  const {\n    handleSubmit,\n    control,\n    register,\n    reset,\n    formState: { errors, isValid },\n  } = useForm();\n\n  const onSubmit = ({ phone, code }) => {\n    setLoading(true);\n    if (!showVerification) {\n      axios\n        .post(\"/users/change/phone\", { phone: \"+\" + phone })\n        .then(() => {\n          setShowVerification(true);\n        })\n        .catch((error) => {\n          setError(error.response.data.message);\n        })\n        .finally(() => {\n          setLoading(false);\n        });\n    } else {\n      dispatch(changeUserNumber({ code }))\n        .then(() => {\n          reset();\n        })\n        .catch((error) => {\n          setError(error.response.data.message);\n        })\n        .finally(() => {\n          setLoading(false);\n        });\n    }\n  };\n\n  const formChange = () => {\n    setError(\"\");\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>\n          {__(\"seo.change_phone_number\")} {__(\"seo.divider\")} {__(\"seo.title\")}\n        </title>\n      </Helmet>\n      <div className=\"changePhone settings\">\n        <header className=\"settings__header\">\n          {/*<Link to={\"/\"} className=\"settings__link\">*/}\n          {/*  <ArrowLeft className=\"settings__link-icon\" />*/}\n          {/*  Back*/}\n          {/*</Link>*/}\n\n          <h1 className=\"settings__title\">{__(\"settings.change_number\")}</h1>\n          <p className=\"settings__text\">{__(\"settings.change_number_text\")}</p>\n        </header>\n\n        <form onChange={formChange} onSubmit={handleSubmit(onSubmit)}>\n          <Grid container columnSpacing=\"1rem\" rowSpacing=\"1.25rem\">\n            <Grid item xl={6} md={8} xs={12}>\n              <div className=\"bo-input\">\n                <label className=\"bo-input__label\">\n                  <p className=\"bo-input__label-text\">\n                    {__(\"settings.enter_phone\")}:\n                  </p>\n                  <div className=\"bo-input__wrap\">\n                    <Controller\n                      name=\"phone\"\n                      control={control}\n                      rules={{ required: true }}\n                      render={({ field }) => (\n                        <PhoneInput\n                          value={field.value}\n                          specialLabel={false}\n                          disableDropdown\n                          placeholder={\"+45 (___)___-____\"}\n                          onChange={(e) => field.onChange(e)}\n                          className={`${error ? \"error\" : \"\"} bo-input__input`}\n                        />\n                      )}\n                    />\n                  </div>\n                </label>\n              </div>\n            </Grid>\n            <Grid item xl={6} md={8} xs={12} />\n            <Grid item xl={6} md={8} xs={12}>\n              {showVerification && (\n                <Input\n                  className={\"auth.js-form__inp-wrap bo-input--icon\"}\n                  data={{\n                    label: `${__(\"settings.v_code\")}:`,\n                    type: \"text\",\n                    placeholder: `${__(\"settings.v_code_enter\")}`,\n                    errors,\n                    error,\n                    settings: {\n                      ...register(\"code\", {\n                        required: true,\n                        minLength: 6,\n                        maxLength: 6,\n                        pattern: /^\\d{6}$/,\n                      }),\n                    },\n                    message: `${__(\"error.invalid_code\")}`,\n                    name: \"code\",\n                  }}\n                >\n                  <button\n                    type=\"button\"\n                    className=\"bo-input__icon bo-input__icon--left bo-input__icon--key\"\n                  ></button>\n                </Input>\n              )}\n            </Grid>\n          </Grid>\n\n          {error && <p className=\"auth-form__error\">{error}</p>}\n\n          <Button\n            type=\"submit\"\n            className=\"settings__btn\"\n            color=\"orange\"\n            size=\"middle\"\n            isLoading={loading}\n            disabled={!isValid}\n          >\n            {__(\"settings.confirm\")}\n          </Button>\n        </form>\n      </div>\n    </>\n  );\n};\n\nexport default React.memo(ChangePhone);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}