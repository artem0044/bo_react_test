{"ast":null,"code":"import{Skeleton,Table,TableBody,TableCell,TableContainer,TableHead,TableRow}from\"@mui/material\";import React,{useEffect,useMemo,useState}from\"react\";import axios from\"@helpers/axios/private.axios\";import{useTranslation}from\"@helpers/translate\";import{useSelector}from\"react-redux\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const OpenOrders=_ref=>{let{hideOtherSymbols,data,setData}=_ref;const[loading,setLoading]=useState(false);const{__}=useTranslation();const{pair}=useSelector(state=>state.futures);const{wallet:{active_wallet}}=useSelector(state=>state);const getOpenOrders=async()=>{try{setLoading(true);const resp=await axios.get(\"/futures/orders/open\");setData(resp.data.data);setLoading(false);}catch(e){console.error(e);}};useEffect(()=>{getOpenOrders();},[active_wallet]);const closeOrder=async orderId=>{try{const resp=await axios.post(\"/futures/orders/close/\".concat(orderId));setData(data=>data.filter(item=>item.id!==orderId));console.log(resp.data);}catch(e){console.error(e);}};const closeOrders=async()=>{try{await axios.post(\"/futures/orders/close\",{ids:data.map(item=>item.id)});setData([]);}catch(e){console.error(e);}};const filteredData=useMemo(()=>{return hideOtherSymbols?data.filter(order=>order.symbol===pair.slug):data;},[data,pair,hideOtherSymbols]);return/*#__PURE__*/_jsx(TableContainer,{sx:{maxHeight:240,overflow:'auto'},className:\"futuresOrdersTable\",children:/*#__PURE__*/_jsxs(Table,{stickyHeader:true,sx:{minWidth:708},children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{className:\"futuresOrdersTable__head-text\",children:__(\"futures.time\")}),/*#__PURE__*/_jsx(TableCell,{className:\"futuresOrdersTable__head-text\",children:__(\"futures.symbol\")}),/*#__PURE__*/_jsx(TableCell,{className:\"futuresOrdersTable__head-text\",children:__(\"futures.type\")}),/*#__PURE__*/_jsx(TableCell,{className:\"futuresOrdersTable__head-text\",children:__(\"futures.side\")}),/*#__PURE__*/_jsx(TableCell,{className:\"futuresOrdersTable__head-text\",children:__(\"futures.price\")}),/*#__PURE__*/_jsx(TableCell,{className:\"futuresOrdersTable__head-text\",children:__(\"futures.amount\")}),/*#__PURE__*/_jsx(TableCell,{className:\"futuresOrdersTable__td-fixed\",align:\"right\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>closeOrders(),type:\"button\",className:\"futuresOrdersTable__head-btn\",children:__(\"futures.cancel_all\")})})]})}),/*#__PURE__*/_jsx(TableBody,{children:loading?Array.from({length:3}).map((_,index)=>/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:8,children:/*#__PURE__*/_jsx(Skeleton,{className:\"main-skeleton\",variant:\"rounded\",height:20,width:\"100%\"})})},index)):filteredData.length?/*#__PURE__*/_jsx(_Fragment,{children:filteredData.map((order,index)=>/*#__PURE__*/_jsxs(TableRow,{sx:{'&:last-child td, &:last-child th':{border:0}},children:[/*#__PURE__*/_jsx(TableCell,{className:\"futuresOrdersTable__time\",children:order.created_at}),/*#__PURE__*/_jsxs(TableCell,{className:\"futuresOrdersTable__value\",children:[order.symbol,\" \",/*#__PURE__*/_jsx(\"span\",{className:\"futuresOrdersTable__tag\",children:__(\"futures.perp\")})]}),/*#__PURE__*/_jsx(TableCell,{className:\"futuresOrdersTable__value\",children:order.type}),/*#__PURE__*/_jsx(TableCell,{className:\"futuresOrdersTable__value \".concat(order.side===\"Sell\"?\"futuresOrdersTable__value--red\":\"futuresOrdersTable__value--green\"),children:order.side}),/*#__PURE__*/_jsx(TableCell,{className:\"futuresOrdersTable__value\",children:order.price}),/*#__PURE__*/_jsxs(TableCell,{className:\"futuresOrdersTable__value\",children:[order.amount,\" USDT\"]}),/*#__PURE__*/_jsx(TableCell,{className:\"futuresOrdersTable__td-fixed\",align:\"right\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>closeOrder(order.id),type:\"button\",className:\"futuresOrdersTable__button\",children:__(\"futures.cancel\")})})]},index))}):/*#__PURE__*/_jsx(\"p\",{className:\"futuresOrdersTable__notFound\",children:__(\"common.not_found\")})})]})});};","map":{"version":3,"names":["Skeleton","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","React","useEffect","useMemo","useState","axios","useTranslation","useSelector","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OpenOrders","_ref","hideOtherSymbols","data","setData","loading","setLoading","__","pair","state","futures","wallet","active_wallet","getOpenOrders","resp","get","e","console","error","closeOrder","orderId","post","concat","filter","item","id","log","closeOrders","ids","map","filteredData","order","symbol","slug","sx","maxHeight","overflow","className","children","stickyHeader","minWidth","align","onClick","type","Array","from","length","_","index","colSpan","variant","height","width","border","created_at","side","price","amount"],"sources":["/Users/admin/Desktop/untitled folder/bo_react_test/src/components/pages/Futures/components/Orders/OpenOrders.jsx"],"sourcesContent":["import {Skeleton, Table, TableBody, TableCell, TableContainer, TableHead, TableRow} from \"@mui/material\";\nimport React, {useEffect, useMemo, useState} from \"react\";\nimport axios from \"@helpers/axios/private.axios\";\nimport {useTranslation} from \"@helpers/translate\";\nimport {useSelector} from \"react-redux\";\n\nexport const OpenOrders = ({hideOtherSymbols, data, setData}) => {\n  const [loading, setLoading] = useState(false);\n  const {__} = useTranslation();\n  const {pair} = useSelector((state) => state.futures);\n  const {\n    wallet: { active_wallet },\n  } = useSelector((state) => state);\n  \n  const getOpenOrders = async () => {\n    try {\n      setLoading(true);\n\n      const resp = await axios.get(`/futures/orders/open`);\n      setData(resp.data.data);\n      setLoading(false);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  useEffect(() => {\n    getOpenOrders();\n  }, [active_wallet]);\n\n  const closeOrder = async (orderId) => {\n    try {\n      const resp = await axios.post(`/futures/orders/close/${orderId}`);\n\n      setData(data => data.filter(item => item.id !== orderId));\n      console.log(resp.data)\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  const closeOrders = async () => {\n    try {\n      await axios.post(`/futures/orders/close`, {\n        ids: data.map((item) => item.id),\n      });\n      setData([]);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  const filteredData = useMemo(() => {\n    return hideOtherSymbols ? data.filter((order) => order.symbol === pair.slug) : data;\n  }, [data, pair, hideOtherSymbols]);\n\n  return (\n    <TableContainer sx={{maxHeight: 240, overflow: 'auto'}} className=\"futuresOrdersTable\">\n      <Table stickyHeader sx={{minWidth: 708}}>\n        <TableHead>\n          <TableRow>\n            <TableCell className=\"futuresOrdersTable__head-text\">{__(\"futures.time\")}</TableCell>\n            <TableCell className=\"futuresOrdersTable__head-text\">{__(\"futures.symbol\")}</TableCell>\n            <TableCell className=\"futuresOrdersTable__head-text\">{__(\"futures.type\")}</TableCell>\n            <TableCell className=\"futuresOrdersTable__head-text\">{__(\"futures.side\")}</TableCell>\n            <TableCell className=\"futuresOrdersTable__head-text\">{__(\"futures.price\")}</TableCell>\n            <TableCell className=\"futuresOrdersTable__head-text\">{__(\"futures.amount\")}</TableCell>\n            <TableCell className=\"futuresOrdersTable__td-fixed\" align=\"right\">\n              <button onClick={() => closeOrders()} type=\"button\" className=\"futuresOrdersTable__head-btn\">\n                {__(\"futures.cancel_all\")}\n              </button>\n            </TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {loading ? (\n            Array.from({length: 3}).map((_, index) => (\n              <TableRow key={index}>\n                <TableCell colSpan={8}>\n                  <Skeleton\n                    className=\"main-skeleton\"\n                    variant=\"rounded\"\n                    height={20}\n                    width=\"100%\"\n                  />\n                </TableCell>\n              </TableRow>\n            ))\n          ) : filteredData.length ? (\n            <>\n              {filteredData.map((order, index) => (<TableRow\n                sx={{'&:last-child td, &:last-child th': {border: 0}}}\n                key={index}>\n                <TableCell className=\"futuresOrdersTable__time\">{order.created_at}</TableCell>\n                <TableCell className=\"futuresOrdersTable__value\">{order.symbol} <span\n                  className=\"futuresOrdersTable__tag\">{__(\"futures.perp\")}</span></TableCell>\n                <TableCell className=\"futuresOrdersTable__value\">{order.type}</TableCell>\n                <TableCell\n                  className={`futuresOrdersTable__value ${order.side === \"Sell\" ? \"futuresOrdersTable__value--red\" : \"futuresOrdersTable__value--green\"}`}\n                >\n                  {order.side}\n                </TableCell>\n                <TableCell className=\"futuresOrdersTable__value\">{order.price}</TableCell>\n                <TableCell className=\"futuresOrdersTable__value\">{order.amount} USDT</TableCell>\n                <TableCell className=\"futuresOrdersTable__td-fixed\" align=\"right\">\n                  <button onClick={() => closeOrder(order.id)} type=\"button\" className=\"futuresOrdersTable__button\">{__(\"futures.cancel\")}</button>\n                </TableCell>\n              </TableRow>))}\n            </>\n          ) : (\n            <p className=\"futuresOrdersTable__notFound\">{__(\"common.not_found\")}</p>\n          )}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}